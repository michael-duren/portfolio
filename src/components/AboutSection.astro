---
import { Image } from "astro:assets";
import Technologies from "./Technologies.astro";
import TechFlowChart from "./TechFlowChart.astro";
import meJem from "../images/me-jem.jpeg";
import mePresenting from "../images/me-presenting.jpeg";
import mePrime from "../images/me-prime.jpeg";
import meThat from "../images/me-that.jpeg";

import headshot from "../images/headshot.jpg";

const images = [mePresenting, mePrime, meJem, meThat];

import SketchArrow from "./SketchArrow.astro";
---

<section
  id="about"
  class="py-24 px-4 w-full relative scroll-mt-16 my-8 rounded-2xl"
>
  <div class="flex flex-col gap-16 w-full">
    <!-- 1. Text Content -->
    <div
      class="max-w-4xl mx-auto w-full space-y-8 animate-on-scroll opacity-0 translate-y-10 transition-all duration-700 relative"
    >
      <!-- Glass Card Container -->
      <div
        class="bg-gray-800/50 backdrop-blur-md border border-gray-700/50 rounded-3xl p-8 md:p-12 shadow-xl"
      >
        <div
          class="flex flex-col md:flex-row gap-8 items-center md:items-start"
        >
          <div class="flex-1 space-y-2">
            <h2
              class="text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-blue-500 pb-2"
            >
              About Me
            </h2>
            <div class="h-1 w-20 bg-purple-600 rounded-full"></div>
          </div>
          <div class="relative group">
            <div
              class="absolute -inset-1 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full blur opacity-50 group-hover:opacity-100 transition duration-1000 group-hover:duration-200"
            >
            </div>
            <div
              class="absolute -inset-1 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full blur opacity-50 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-pulse"
            >
            </div>
            <Image
              src={headshot}
              alt="Michael Duren Headshot"
              class="relative w-32 h-32 md:w-40 md:h-40 rounded-full object-cover border-4 border-gray-900 shadow-2xl z-10"
            />
          </div>
        </div>

        <div
          class="prose prose-invert max-w-none text-lg leading-relaxed text-gray-300 mt-8"
        >
          <p>
            I'm a software engineer specialized in building distributed systems,
            cloud infrastructure, and
            <span class="font-semibold text-white">Open Source</span> software. I
            build production observability platforms and developer tools using
            <span class="font-semibold text-blue-400">Typescript</span>,
            <span class="font-semibold text-cyan-400">Go</span>,
            <span class="font-semibold text-purple-400">C#/Java</span>, and
            <span class="font-semibold text-yellow-400">Python</span>.
          </p>

          <p>
            I focus on delivering tangible operational improvements. I've
            architected observability infrastructure that reduced
            <span class="font-semibold text-white"
              >Mean Time To Resolution (MTTR) by 40%</span
            >
            and built Go-based deployment tools that slashed deployment times by
            <span class="font-semibold text-white"
              >78% (from 90 to 20 minutes)</span
            >.
          </p>

          <p>
            Beyond infrastructure, I've built <a
              href="https://www.patterninterruptinc.com/"
              target="_blank"
              class="text-purple-400 font-semibold hover:underline decoration-2 underline-offset-2"
              >Next Step CMS</a
            > with <a
              href="https://www.patterninterruptinc.com/"
              target="_blank"
              class="text-purple-400 font-semibold hover:underline decoration-2 underline-offset-2"
              >Pattern Interrupt</a
            >, a horizontally scalable SaaS platform. I also contribute to <span
              class="font-semibold text-white">Code for Recovery</span
            >, developing open-source tools for the recovery community.
          </p>

          <p>
            I'm drawn to the problems that live between services: how systems
            communicate, fail, recover, and scale.
          </p>
        </div>
      </div>

      <!-- Decorative Arrow -->
      <div
        class="hidden lg:block absolute -bottom-24 -right-12 w-32 h-32 transform rotate-12"
      >
        <SketchArrow
          variant="curved-right"
          class="w-full h-full text-gray-400/50"
        />
      </div>
    </div>

    <!-- 2. High Def Monitor Display (Speaking and Community) -->
    <div
      class="w-full flex flex-col items-center justify-center relative animate-on-scroll opacity-0 translate-y-10 transition-all duration-700 delay-200"
    >
      <div class="w-full max-w-4xl space-y-8">
        <h3 class="text-2xl font-bold text-gray-100 text-center">
          Speaking and Community
        </h3>
        <p class="text-center text-gray-300 max-w-2xl mx-auto">
          I've given talks, taught courses on popular topics in .NET and Go,
          community is huge and through my career I've got to meet and learn
          from some of the best engineers in the world.
        </p>

        <div class="relative w-full aspect-[21/9]">
          <!-- Monitor Frame -->
          <div
            class="relative bg-gray-900 rounded-lg shadow-2xl border-[4px] border-gray-800 overflow-hidden ring-1 ring-white/10 h-full flex flex-col"
          >
            <!-- Monitor Screen Content -->
            <div class="bg-gray-950 flex-1 relative overflow-hidden group">
              <!-- Wallpaper/Background Glow -->
              <div
                class="absolute inset-0 bg-gradient-to-br from-purple-900/20 to-blue-900/10 pointer-events-none"
              >
              </div>

              <!-- Windows Grid (4 Columns) -->
              <div class="grid grid-cols-4 gap-4 h-full p-4">
                {
                  images.slice(0, 4).map((img, index) => (
                    <div class="relative rounded-md overflow-hidden border border-white/10 shadow-lg group-hover:scale-[1.01] transition-transform duration-500 origin-center z-10 bg-gray-900">
                      <Image
                        src={img}
                        alt={`Community event ${index + 1}`}
                        class="w-full h-full object-cover opacity-90 hover:opacity-100 transition-opacity"
                      />
                    </div>
                  ))
                }
              </div>
            </div>

            <!-- Bottom Bezel with Logo -->
            <div
              class="h-8 bg-gray-900 flex items-center justify-center border-t border-gray-800 relative z-20"
            >
              <div
                class="text-[10px] font-sans font-bold tracking-[0.3em] text-gray-600 uppercase"
              >
                DurenView
              </div>
            </div>
          </div>

          <!-- Monitor Stand -->
          <div
            class="absolute left-1/2 -translate-x-1/2 -bottom-10 w-48 h-12 bg-gradient-to-b from-gray-700 to-gray-800 -z-10 rounded-b shadow-lg clip-path-trapezoid"
          >
          </div>
        </div>
      </div>
      <!-- Decorative Arrow to Technologies -->
      <div
        class="hidden lg:block absolute -bottom-24 left-1/4 w-32 h-32 transform -rotate-12 z-0"
      >
        <SketchArrow
          variant="curved-left"
          class="w-full h-full text-gray-400/50"
        />
      </div>
    </div>

    <!-- 3. Technologies -->
    <div
      class="w-full max-w-4xl mx-auto animate-on-scroll opacity-0 translate-y-10 transition-all duration-700 delay-300"
    >
      <h3 class="text-2xl font-bold mb-2 text-gray-100 text-center">
        Step into my laboratory
      </h3>
      <p class="text-center text-gray-400 text-sm mb-6 font-mono">
        chemicals and potions I use to craft cutting edge solutions
      </p>
      <Technologies />

      <!-- Tech Flow Chart -->
      <div
        class="mt-16 w-full animate-on-scroll opacity-0 translate-y-10 transition-all duration-700 delay-400"
      >
        <h3 class="text-2xl font-bold mb-2 text-gray-100 text-center">
          Crafted engineered solutions.
        </h3>
        <p class="text-center text-gray-400 text-sm mb-6 font-mono">
          Measuring, mixing, and combining technologies...
        </p>
        <TechFlowChart />
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("astro:page-load", () => {
    // Animation Observer
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.remove("opacity-0", "translate-y-10");
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.1 },
    );

    document.querySelectorAll(".animate-on-scroll").forEach((el) => {
      observer.observe(el);
    });
  });
</script>
