---
import { Image } from "astro:assets";
import portfolioList from "../constants/portfolio-work";
import { Icon } from "astro-icon/components";
---

<section id="work" class="py-20 px-4 bg-gray-50 dark:bg-gray-800/50 w-full">
  <div class="max-w-7xl mx-auto">
    <h2
      class="text-4xl font-bold mb-12 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-teal-400"
    >
      Selected Work
    </h2>

    <div class="space-y-24">
      {
        portfolioList.map((project, index) => (
          <div
            class={`flex flex-col ${index % 2 === 0 ? "lg:flex-row" : "lg:flex-row-reverse"} gap-12 items-center animate-on-scroll opacity-0 translate-y-10 transition-all duration-700`}
          >
            <!-- Project Functionality/Image Area -->
            <div class="flex-1 w-full group perspective-1000">
              <div class="relative transform transition-transform duration-500 group-hover:rotate-x-2 group-hover:rotate-y-2 shadow-2xl rounded-xl overflow-hidden bg-gray-900 border border-gray-700">
                {/* Browser/Terminal Header */}
                <div class="bg-gray-800 px-4 py-2 flex items-center gap-2 border-b border-gray-700">
                  <div class="flex gap-2">
                    <span class="w-3 h-3 rounded-full bg-red-500" />
                    <span class="w-3 h-3 rounded-full bg-yellow-500" />
                    <span class="w-3 h-3 rounded-full bg-green-500" />
                  </div>
                  <div class="flex-1 text-center text-xs text-gray-400 font-mono truncate px-4">
                    {project.websiteLink || project.codeLink || "local://project"}
                  </div>
                </div>

                {/* Main Image */}
                <div class="aspect-video relative overflow-hidden bg-black">
                  {project.images && project.images.length > 0 ? (
                    <Image
                      src={project.images[0]!}
                      alt={project.title}
                      class="w-full h-full object-cover opacity-90 transition-opacity group-hover:opacity-100"
                    />
                  ) : (
                    <div class="w-full h-full flex items-center justify-center text-gray-500 font-mono">
                      // No PREVIEW AVAILABLE
                    </div>
                  )}
                </div>
              </div>
            </div>

            <!-- Project Details -->
            <div class="flex-1 space-y-6">
              <div class="flex items-center gap-4">
                  <span class="text-4xl font-bold text-gray-200/20 font-mono">0{index + 1}</span>
                  <h3 class="text-3xl font-bold">{project.title}</h3>
              </div>
              
              <div class="prose dark:prose-invert">
                {project.description.map((paragraph) => (
                  <p class="text-gray-600 dark:text-gray-300 text-lg leading-relaxed">
                    {paragraph}
                  </p>
                ))}
              </div>

              <div class="flex gap-4 pt-4">
                {project.websiteLink && (
                  <a
                    href={project.websiteLink}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="btn btn-primary gap-2"
                  >
                    <Icon name="carbon:launch" class="w-5 h-5" />
                    Visit Site
                  </a>
                )}
                {project.codeLink && (
                  <a
                    href={project.codeLink}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="btn btn-outline gap-2"
                  >
                    <Icon name="mdi:github" class="w-5 h-5" />
                    View Code
                  </a>
                )}
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .perspective-1000 {
    perspective: 1000px;
  }
  .rotate-x-2 {
    transform: rotateX(2deg);
  }
  .rotate-y-2 {
    transform: rotateY(2deg);
  }
</style>
