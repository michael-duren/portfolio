---
import MainLayout from "../layouts/MainLayout.astro";
import Modal from "../components/Modal.astro";
import { Image } from "astro:assets";
import michaelAvatar from "../images/Avatar.png";
import AnimatedBackground from "../components/AnimatedBackground.astro";
---

<MainLayout title="Michael Duren - Portfolio" animated={true}>
  <AnimatedBackground />

  <div
    class="flex flex-col lg:flex-row lg:items-center lg:justify-center w-full gap-8 px-4 lg:px-8 max-w-7xl mx-auto"
  >
    <div
      class="relative z-50 w-full lg:w-1/2 max-w-3xl lg:max-w-none mb-8 lg:mb-0"
    >
      <div
        class="bg-gray-900/90 dark:bg-gray-950/95 rounded-lg shadow-2xl overflow-hidden border-2 border-gray-700 dark:border-gray-600"
      >
        <div
          class="bg-gray-800 dark:bg-gray-900 px-4 py-2 flex items-center gap-2 border-b border-gray-700 dark:border-gray-600"
        >
          <div class="flex gap-2">
            <span class="w-3 h-3 rounded-full bg-red-500"></span>
            <span class="w-3 h-3 rounded-full bg-yellow-500"></span>
            <span class="w-3 h-3 rounded-full bg-green-500"></span>
          </div>
          <span class="text-gray-400 dark:text-gray-500 text-sm ml-4 font-mono"
            >michael@portfolio: ~</span
          >
        </div>

        <div class="p-6 font-mono text-sm h-[34rem] overflow-y-auto relative">
          <div class="flex items-center gap-2 mb-3 relative z-30">
            <span class="text-green-400 dark:text-green-300"
              >michael@portfolio</span
            >
            <span class="text-white dark:text-gray-200">:</span>
            <span class="text-blue-400 dark:text-blue-300">~</span>
            <span class="text-white dark:text-gray-200">$</span>
            <div
              id="terminal-input"
              class="text-green-300 dark:text-green-200 ml-2"
            >
            </div>
          </div>

          <div class="relative z-30">
            <ul
              id="terminal-output"
              class="text-gray-300 dark:text-gray-400 space-y-2"
            >
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div
      class="hidden lg:flex relative z-20 w-full lg:w-1/2 items-center justify-center min-h-[600px]"
    >
      <div class="tech-orbit absolute inset-0 pointer-events-none">
        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 0deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-typescript-plain colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 45deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-go-original-wordmark colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 90deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-dotnetcore-plain colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 135deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-kubernetes-plain colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 180deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i
              class="devicon-amazonwebservices-plain-wordmark colored text-[5rem]"
            ></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 225deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-azure-plain colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 270deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-react-original colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 315deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-docker-plain colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 22.5deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-postgresql-plain colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 67.5deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-microsoftsqlserver-plain colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 112.5deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-grafana-plain colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 157.5deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-prometheus-original colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 202.5deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-nodejs-plain colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 247.5deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-python-plain colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 292.5deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-lua-plain colored text-[5rem]"></i>
          </div>
        </div>

        <div
          class="tech-icon"
          style="--orbit-radius: 300px; --angle: 337.5deg; --duration: 30s;"
        >
          <div class="icon-wrapper">
            <i class="devicon-neovim-plain colored text-[5rem]"></i>
          </div>
        </div>
      </div>
      <div class="relative">
        <div class="floating-container">
          <div class="avatar">
            <Image src={michaelAvatar} alt="Avatar of Michael Duren" />
          </div>

          <svg
            class="avatar-shadow"
            width="172"
            height="29"
            viewBox="0 0 172 29"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M85.717 0C38.379 0 0 6.31805 0 14.1124C0 21.9067 38.379 28.2256 85.717 28.2256C133.055 28.2256 171.434 21.9067 171.434 14.1124C171.434 6.31805 133.055 0 85.717 0Z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <div class="lg:hidden w-full px-4 mt-12 mb-8">
    <h2
      class="text-2xl font-bold text-center mb-6 text-gray-800 dark:text-gray-200"
    >
      Technologies
    </h2>
    <div class="grid grid-cols-4 sm:grid-cols-5 gap-6 max-w-2xl mx-auto">
      <div class="flex flex-col items-center gap-2 group">
        <div class="tech-static-icon">
          <i class="devicon-typescript-plain colored text-[3rem]"></i>
        </div>
        <span class="text-xs text-gray-600 dark:text-gray-400 font-medium"
          >TypeScript</span
        >
      </div>

      <div class="flex flex-col items-center gap-2 group">
        <div class="tech-static-icon">
          <i class="devicon-go-original-wordmark colored text-[3rem]"></i>
        </div>
        <span class="text-xs text-gray-600 dark:text-gray-400 font-medium"
          >Go</span
        >
      </div>

      <div class="flex flex-col items-center gap-2 group">
        <div class="tech-static-icon">
          <i class="devicon-dotnetcore-plain colored text-[3rem]"></i>
        </div>
        <span class="text-xs text-gray-600 dark:text-gray-400 font-medium"
          >.NET</span
        >
      </div>

      <div class="flex flex-col items-center gap-2 group">
        <div class="tech-static-icon">
          <i class="devicon-react-original colored text-[3rem]"></i>
        </div>
        <span class="text-xs text-gray-600 dark:text-gray-400 font-medium"
          >React</span
        >
      </div>

      <div class="flex flex-col items-center gap-2 group">
        <div class="tech-static-icon">
          <i class="devicon-docker-plain colored text-[3rem]"></i>
        </div>
        <span class="text-xs text-gray-600 dark:text-gray-400 font-medium"
          >Docker</span
        >
      </div>

      <div class="flex flex-col items-center gap-2 group">
        <div class="tech-static-icon">
          <i class="devicon-kubernetes-plain colored text-[3rem]"></i>
        </div>
        <span class="text-xs text-gray-600 dark:text-gray-400 font-medium"
          >K8s</span
        >
      </div>

      <div class="flex flex-col items-center gap-2 group">
        <div class="tech-static-icon">
          <i class="devicon-postgresql-plain colored text-[3rem]"></i>
        </div>
        <span class="text-xs text-gray-600 dark:text-gray-400 font-medium"
          >PostgreSQL</span
        >
      </div>

      <div class="flex flex-col items-center gap-2 group">
        <div class="tech-static-icon">
          <i class="devicon-grafana-plain colored text-[3rem]"></i>
        </div>
        <span class="text-xs text-gray-600 dark:text-gray-400 font-medium"
          >Grafana</span
        >
      </div>

      <div class="flex flex-col items-center gap-2 group">
        <div class="tech-static-icon">
          <i class="devicon-prometheus-original colored text-[3rem]"></i>
        </div>
        <span class="text-xs text-gray-600 dark:text-gray-400 font-medium"
          >Prometheus</span
        >
      </div>

      <div class="flex flex-col items-center gap-2 group">
        <div class="tech-static-icon">
          <i class="devicon-nodejs-plain colored text-[3rem]"></i>
        </div>
        <span class="text-xs text-gray-600 dark:text-gray-400 font-medium"
          >Node.js</span
        >
      </div>
    </div>
  </div>

  <audio class="keyboard-sound" preload="auto" id="K1" src="/audio/K1.mp3"
  ></audio>
  <audio class="keyboard-sound" preload="auto" id="K2" src="/audio/K2.mp3"
  ></audio>
  <audio class="keyboard-sound" preload="auto" id="K3" src="/audio/K3.mp3"
  ></audio>
  <audio class="keyboard-sound" preload="auto" id="K4" src="/audio/K4.mp3"
  ></audio>
  <audio class="keyboard-sound" preload="auto" id="K5" src="/audio/K5.mp3"
  ></audio>
  <audio class="keyboard-sound" preload="auto" id="K6" src="/audio/K6.mp3"
  ></audio>
  <audio class="keyboard-sound" preload="auto" id="K7" src="/audio/K7.mp3"
  ></audio>
  <audio class="keyboard-sound" preload="auto" id="K8" src="/audio/K8.mp3"
  ></audio>
  <audio class="keyboard-sound" preload="auto" id="K9" src="/audio/K9.mp3"
  ></audio>
  <audio class="keyboard-sound" preload="auto" id="K10" src="/audio/K10.mp3"
  ></audio>

  <Modal />
</MainLayout>

<script>
  import "../scripts/terminal";
  import { hasSeenSoundModal } from "../store/store.ts";

  document.addEventListener("astro:page-load", () => {
    if (!hasSeenSoundModal.get()) {
      const modal = document.querySelector("#my_modal_2") as HTMLDialogElement;
      if (modal) {
        modal.showModal();
      }
    }
  });
</script>

<style>
  @keyframes blob {
    0% {
      transform: translate(0px, 0px) scale(1);
    }
    33% {
      transform: translate(40px, -60px) scale(1.15);
    }
    66% {
      transform: translate(-30px, 30px) scale(0.9);
    }
    100% {
      transform: translate(0px, 0px) scale(1);
    }
  }

  .animate-blob {
    animation: blob 10s infinite;
  }

  .animation-delay-2000 {
    animation-delay: 2s;
  }

  .animation-delay-4000 {
    animation-delay: 4s;
  }

  .animation-delay-6000 {
    animation-delay: 6s;
  }

  .bg-grid-pattern {
    background-image:
      linear-gradient(to right, #6366f1 1px, transparent 1px),
      linear-gradient(to bottom, #6366f1 1px, transparent 1px);
    background-size: 60px 60px;
  }

  @keyframes float-shape {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }
    25% {
      transform: translateY(-30px) rotate(90deg);
    }
    50% {
      transform: translateY(0px) rotate(180deg);
    }
    75% {
      transform: translateY(30px) rotate(270deg);
    }
  }

  .floating-container {
    position: relative;
    width: 20rem;
    height: 20rem;
  }

  .avatar {
    position: absolute;
    background-color: rgba(0, 0, 0, 0.1);
    border-radius: 50%;
    left: 50%;
    transform: translateX(-50%);
    animation: animateY 2.5s linear infinite alternate-reverse;
    z-index: 2;
  }

  .avatar-shadow {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    animation: animateSize 2.5s linear infinite alternate-reverse;
    z-index: 1;
  }

  @keyframes animateY {
    0% {
      top: 10%;
      scale: 0.95;
    }
    100% {
      top: 15%;
      scale: 1;
    }
  }

  @keyframes animateSize {
    0% {
      scale: 1;
      fill: #cecdd340;
    }
    100% {
      scale: 1.1;
      fill: #cecdd3;
    }
  }

  .tech-orbit {
    perspective: 1000px;
  }

  .tech-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    margin: -30px 0 0 -30px;
    animation: orbit var(--duration) linear infinite;
    transform-style: preserve-3d;
  }

  @keyframes orbit {
    from {
      transform: translateX(-50%) translateY(-50%) rotateZ(var(--angle))
        translateX(var(--orbit-radius)) rotateZ(calc(-1 * var(--angle)));
    }
    to {
      transform: translateX(-50%) translateY(-50%)
        rotateZ(calc(var(--angle) + 360deg)) translateX(var(--orbit-radius))
        rotateZ(calc(-1 * (var(--angle) + 360deg)));
    }
  }

  .icon-wrapper {
    animation: counter-rotate var(--duration) linear infinite reverse;
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.15));
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border-radius: 50%;
    width: 100px;
    height: 100px;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .dark .icon-wrapper {
    background: rgba(30, 41, 59, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.1);
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.4));
  }

  .icon-wrapper:hover {
    filter: drop-shadow(0 8px 12px rgba(0, 0, 0, 0.3));
    transform: scale(1.3);
  }

  .dark .icon-wrapper:hover {
    filter: drop-shadow(0 8px 12px rgba(0, 0, 0, 0.6));
  }

  @keyframes counter-rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .tech-icon:nth-child(odd) .icon-wrapper {
    animation:
      counter-rotate var(--duration) linear infinite reverse,
      pulse 3s ease-in-out infinite;
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 0.85;
    }
    50% {
      opacity: 1;
    }
  }

  @keyframes blink {
    0%,
    50% {
      opacity: 1;
    }
    51%,
    100% {
      opacity: 0;
    }
  }

  .blinking-cursor {
    animation: blink 1s infinite;
  }

  .overflow-y-auto::-webkit-scrollbar {
    width: 8px;
  }

  .overflow-y-auto::-webkit-scrollbar-track {
    background: #1f2937;
  }

  .overflow-y-auto::-webkit-scrollbar-thumb {
    background: #4b5563;
    border-radius: 4px;
  }

  .overflow-y-auto::-webkit-scrollbar-thumb:hover {
    background: #6b7280;
  }

  .tech-static-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 70px;
    height: 70px;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
  }

  .dark .tech-static-icon {
    background: rgba(30, 41, 59, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
  }

  .tech-static-icon:hover {
    transform: translateY(-4px) scale(1.05);
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
    background: rgba(255, 255, 255, 0.1);
  }

  .dark .tech-static-icon:hover {
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
    background: rgba(30, 41, 59, 0.6);
  }
</style>
