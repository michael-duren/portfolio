---
import MainLayout from "../layouts/MainLayout.astro";
import { Image } from "astro:assets";
import portfolioList from "../constants/portfolio-work";
import AnimatedBackground from "../components/AnimatedBackground.astro";
---

<MainLayout title="Michael Duren - Work">
  <AnimatedBackground />
  <div class="w-full max-w-5xl mx-auto">
    <div
      class="bg-gray-900 dark:bg-gray-950 rounded-lg shadow-2xl overflow-hidden border-2 border-gray-700 dark:border-gray-600"
    >
      <div
        class="bg-gray-800 dark:bg-gray-900 px-4 py-2 flex items-center gap-2 border-b border-gray-700 dark:border-gray-600"
      >
        <div class="flex gap-2">
          <span class="w-3 h-3 rounded-full bg-red-500"></span>
          <span class="w-3 h-3 rounded-full bg-yellow-500"></span>
          <span class="w-3 h-3 rounded-full bg-green-500"></span>
        </div>
        <span class="text-gray-400 dark:text-gray-500 text-sm ml-4 font-mono"
          >~/portfolio/work</span
        >
      </div>

      <div
        class="p-6 font-mono text-sm overflow-y-auto max-h-[80vh] scroll-smooth"
      >
        <div class="flex flex-col md:flex-row items-center gap-2 mb-4">
          <div>
            <span class="text-green-400 dark:text-green-300"
              >michael@portfolio</span
            >
            <span class="text-gray-400 dark:text-gray-500">:</span>
            <span class="text-blue-400 dark:text-blue-300">~/work</span>
            <span class="text-gray-400 dark:text-gray-500">$</span>
          </div>
          <span class="text-gray-300 dark:text-gray-400"
            >cat table_of_contents.txt</span
          >
        </div>

        <div class="mb-8 pb-6 border-b-2 border-gray-700 dark:border-gray-600">
          <div
            class="text-cyan-400 dark:text-cyan-300 font-bold mb-3 text-base"
          >
            ðŸ“‹ TABLE OF CONTENTS
          </div>
          <div class="space-y-1 ml-4">
            {
              portfolioList.map((project, index) => (
                <div class="flex items-start gap-2 hover:bg-gray-800/50 dark:hover:bg-gray-800/70 transition-colors rounded px-2 py-1">
                  <span class="text-blue-400 dark:text-blue-300 font-bold min-w-8">
                    [{index + 1}]
                  </span>
                  <a
                    href={`#project-${index}`}
                    class="text-yellow-400 dark:text-yellow-300 hover:text-yellow-300 dark:hover:text-yellow-200 hover:underline transition-colors"
                  >
                    {project.title}
                  </a>
                </div>
              ))
            }
          </div>
        </div>

        <div class="flex flex-col md:flex-row items-center gap-2 mb-4">
          <div>
            <span class="text-green-400 dark:text-green-300"
              >michael@portfolio</span
            >
            <span class="text-gray-400 dark:text-gray-500">:</span>
            <span class="text-blue-400 dark:text-blue-300">~/work</span>
            <span class="text-gray-400 dark:text-gray-500">$</span>
          </div>
          <span class="text-gray-300 dark:text-gray-400">ls -la projects</span>
        </div>

        {
          portfolioList.map((project, index) => (
            <div
              id={`project-${index}`}
              class="mb-8 animate-fade-in scroll-mt-4"
              style={`animation-delay: ${index * 0.1}s`}
            >
              <div class="flex items-start gap-4 mb-2">
                <span class="text-blue-400 dark:text-blue-300 font-bold">
                  [{index + 1}]
                </span>
                <div class="flex-1">
                  <div class="flex items-center gap-3 mb-1">
                    <h3 class="text-yellow-400 dark:text-yellow-300 text-lg font-bold">
                      {project.title}
                    </h3>
                    <div class="flex gap-2">
                      {project.codeLink && (
                        <a
                          href={project.codeLink}
                          target="_blank"
                          rel="noopener noreferrer"
                          class="text-green-400 dark:text-green-300 hover:text-green-300 dark:hover:text-green-200 transition-colors text-xs flex items-center gap-1"
                          aria-label={`View ${project.title} code`}
                        >
                          <span class="opacity-70">[</span>code
                          <span class="opacity-70">]</span>
                        </a>
                      )}
                      {project.websiteLink && (
                        <a
                          href={project.websiteLink}
                          target="_blank"
                          rel="noopener noreferrer"
                          class="text-cyan-400 dark:text-cyan-300 hover:text-cyan-300 dark:hover:text-cyan-200 transition-colors text-xs flex items-center gap-1"
                          aria-label={`Visit ${project.title} site`}
                        >
                          <span class="opacity-70">[</span>live
                          <span class="opacity-70">]</span>
                        </a>
                      )}
                    </div>
                  </div>

                  <div class="text-gray-300 dark:text-gray-400 space-y-2 mb-3">
                    {project.description.map((paragraph) => (
                      <p class="leading-relaxed">{paragraph}</p>
                    ))}
                  </div>

                  {project.images && project.images.length > 0 && (
                    <div class="mt-3 mb-2">
                      <span class="text-gray-500 dark:text-gray-600 text-xs">
                        â””â”€ Screenshots:
                      </span>
                      <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mt-2">
                        {project.images.slice(0, 2).map((image, imgIndex) => (
                          <div class="border border-gray-700 dark:border-gray-600 rounded overflow-hidden hover:border-gray-500 dark:hover:border-gray-400 transition-colors">
                            <Image
                              src={image}
                              alt={`${project.title} screenshot ${imgIndex + 1}`}
                              class="w-full h-auto"
                            />
                          </div>
                        ))}
                      </div>
                    </div>
                  )}

                  <div class="border-t border-gray-800 dark:border-gray-700 mt-4" />
                </div>
              </div>
            </div>
          ))
        }

        <div class="flex items-center gap-2 mt-6">
          <span class="text-green-400 dark:text-green-300"
            >michael@portfolio</span
          >
          <span class="text-gray-400 dark:text-gray-500">:</span>
          <span class="text-blue-400 dark:text-blue-300">~/work</span>
          <span class="text-gray-400 dark:text-gray-500">$</span>
          <span class="text-gray-300 dark:text-gray-400 blinking-cursor">_</span
          >
        </div>
      </div>
    </div>
  </div>
</MainLayout>

<style>
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    opacity: 0;
    animation: fade-in 0.5s ease-out forwards;
  }

  @keyframes blink {
    0%,
    50% {
      opacity: 1;
    }
    51%,
    100% {
      opacity: 0;
    }
  }

  .blinking-cursor {
    animation: blink 1s infinite;
  }

  /* Scrollbar styling for dark theme */
  .overflow-y-auto::-webkit-scrollbar {
    width: 8px;
  }

  .overflow-y-auto::-webkit-scrollbar-track {
    background: #1f2937;
  }

  .overflow-y-auto::-webkit-scrollbar-thumb {
    background: #4b5563;
    border-radius: 4px;
  }

  .overflow-y-auto::-webkit-scrollbar-thumb:hover {
    background: #6b7280;
  }
</style>
